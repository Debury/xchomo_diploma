# Caddyfile for ClimateData AI Assistant
# Automatic HTTPS with Let's Encrypt

climaterag.online {
    # Reverse proxy to FastAPI backend
    reverse_proxy web-api:8000 {
        # Preserve original host header
        header_up Host {host}
        header_up X-Real-IP {remote}
        header_up X-Forwarded-For {remote}
        header_up X-Forwarded-Proto {scheme}
    }
    
    # Optional: Redirect root to /app if needed
    # handle_path /app* {
    #     reverse_proxy web-api:8000
    # }
}

# Optional: Redirect www to non-www
# (Odstránené - ak chceš www, pridaj A záznam pre www v DNS paneli)
# www.climaterag.online {
#     redir https://climaterag.online{uri} permanent
# }

# Optional: HTTP to HTTPS redirect
http://climaterag.online {
    redir https://climaterag.online{uri} permanent
}
